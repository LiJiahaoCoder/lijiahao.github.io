# WebGL é¢œè‰²ä¸å›¾åƒ

## ğŸ“–å‰è¨€

è¿™ä¸¤å¤©æŠ½æ—¶é—´æŠŠã€Šè®¡ç®—æœºå›¾å½¢å­¦å¯¼è®ºã€‹çš„ç¬¬ä¸€ç« çœ‹å®Œäº†ï¼Œè¾¹çœ‹è¾¹æƒŠå‘¼ï¼šâ€œæˆ‘diu~ç«Ÿç„¶æ˜¯è¿™æ ·â€ï¼ç¬¬ä¸€ç« è™½ä¸ºæ¦‚è¿°ï¼Œä½†å†…å®¹è¿˜æ˜¯è¦è®¸ä¹…æ‰èƒ½â€œæ¶ˆåŒ–â€ï¼

â€œç‹¬ä¹ä¹ä¸å¦‚ä¼—ä¹ä¹â€ï¼Œæ—¢ç„¶å†…å®¹è¿™ä¹ˆå“‡å™»ï¼Œé‚£å°±æ€»ç»“åˆ†äº«å‡ºæ¥ğŸ¤—

## ğŸ¨é¢œè‰²å’Œå›¾åƒ

ã€Šä½ æ˜¯æˆ‘çš„çœ¼ã€‹é‡Œæœ‰ä¸€å¥æ­Œè¯æ˜¯â€œçœ¼å‰çš„é»‘ä¸æ˜¯é»‘ï¼Œä½ è¯´çš„ç™½æ˜¯ä»€ä¹ˆç™½â€ï¼Œå½“åˆä¸€ç›´ä¸ç†è§£ä¸ºä»€ä¹ˆä¸æ˜¯é»‘ï¼Ÿç–‘æƒ‘ç™½æ˜¯ä»€ä¹ˆç™½ï¼Ÿç›´åˆ°æˆ‘çœ‹äº†è¿™ä¸€ç« æ‰çŸ¥é“ï¼šçœ¼å‰çš„é»‘æœ‰å¯èƒ½ä¸æ˜¯é»‘ï¼Œäº§å“å£ä¸­äº”å½©æ–‘æ–“çš„é»‘... ...ï¼ˆæè¿™ç§éœ€æ±‚çš„äº§å“åº”è¯¥æŒ¨ä¸€é¡¿æš´æï¼‰ğŸ¤º

é¦–å…ˆè¦æ˜ç¡®ï¼Œå½“æˆ‘ä»¬åœ¨è®¨è®ºé¢œè‰²æ—¶éœ€è¦åœ¨ä¸¤ä¸ªå±‚é¢ä¸Šè¿›è¡Œè€ƒé‡ï¼šç‰©ç†å±‚ï¼ŒåŒ…æ‹¬å…‰åˆ°è¾¾ç‰©ä½“è¡¨é¢ç„¶ååˆ°è¾¾äººçœ¼æ—¶äº§ç”Ÿçš„é¢œè‰²åˆºæ¿€æ‰€æ¶‰åŠçš„ç‰©ç†è§„åˆ™ï¼›æ„ŸçŸ¥å±‚ï¼ŒåŒ…æ‹¬äººç±»æ„ŸçŸ¥åˆ°é¢œè‰²åˆºæ¿€çš„æœºç†ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸»è§‚å› ç´ ï¼ˆåƒæˆ‘è¿™ä¸ªè‰²å¼±çœ‹åˆ°çš„é¢œè‰²å¯èƒ½å’Œæ­£å¸¸äººä¼šä¸åŒï¼‰ğŸŒš

ä¸‹é¢å°†ä»è¿™ä¸¤ä¸ªæ–¹é¢ä»‹ç»ä¸€ä¸‹ğŸ˜‰

### è§†è§‰ç³»ç»Ÿ

é¦–å…ˆæ¥èŠä¸€ä¸‹è§†è§‰ç³»ç»Ÿï¼Œ*äººç±»çš„è§†è§‰ç³»ç»Ÿï¼ˆHVSï¼‰* ç”±çœ¼ç›å’Œå¤§è„‘ç»„æˆï¼Œçœ¼ç›è´Ÿè´£æ•æ‰å…‰çº¿å’Œç‰©ç†é¢œè‰²åˆºæ¿€ï¼Œå¤§è„‘è´Ÿè´£è§£é‡Šè¿™äº›è§†è§‰åˆºæ¿€ã€‚

é¢œè‰²åˆºæ¿€æ˜¯ä¸€ç§è¾å°„èƒ½ï¼Œä½†æ˜¯è§†è§‰ç³»ç»Ÿå´æ— æ³•æ„ŸçŸ¥æ‰€æœ‰çš„è¾å°„ã€‚å…‰å¯ä»¥æ ¹æ®æ³¢é•¿è¿›è¡Œæè¿°ï¼Œå¯è§å…‰æ˜¯äººç±»è§†è§‰ç³»ç»Ÿå”¯ä¸€èƒ½æ„ŸçŸ¥çš„è¾å°„ï¼Œæ³¢é•¿èŒƒå›´æ˜¯ *380nmåˆ°780nm*ã€‚

![hvs](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/hvs.jpeg)

è¾å°„é€šè¿‡è§’è†œè¿›å…¥çœ¼ç›ï¼Œæœ€ååˆ°è¾¾è§†ç½‘è†œã€‚è§†ç½‘è†œä¸Šæœ‰ä¸¤ç§å…‰çº¿æ¥æ”¶å™¨ï¼Œè§†æ†ç»†èƒå’Œè§†é”¥ç»†èƒã€‚è§†æ†ç»†èƒèƒ½å¤Ÿæ¢æµ‹åˆ°å¾®å¼±çš„å…‰ï¼Œå¹¶ä¸”äº§ç”Ÿå•è‰²çš„ä¿¡å·ï¼Œæ¯”å¦‚ä½ å’Œå¥³ç¥åœ¨çœ‹æ˜Ÿæ˜Ÿçš„æ—¶å€™ï¼Œå°±æ˜¯è§†æ†ç»†èƒåœ¨å·¥ä½œã€‚è§†é”¥ç»†èƒæ²¡æœ‰è§†æ†ç»†èƒæ•æ„Ÿï¼Œåœ¨ç™½å¤©ï¼Œå…‰çº¿éå¸¸å¼ºä»¥è‡³äºè§†æ†ç»†èƒè¾¾åˆ°é¥±å’Œè€Œå˜å¾—æ¯«æ— åŠŸèƒ½æ€§ï¼Œæ­¤æ—¶è§†é”¥ç»†èƒå¼€å§‹èµ·ä½œç”¨ã€‚

æ ¹æ®å¯¹å¯è§å…‰è°±å„æ³¢é•¿éƒ¨åˆ†æ•æ„Ÿåº¦çš„ä¸åŒï¼Œè§†é”¥ç»†èƒåˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šé•¿ã€ä¸­ã€çŸ­è§†é”¥ç»†èƒã€‚ä¸‰ç§ä¸åŒçš„è§†é”¥ç»†èƒäº§ç”Ÿçš„ä¸åŒä¿¡å·å¯¼è‡´äº†å…‰çš„ä¸‰è‰²è§†è§‰ç‰¹å¾ï¼Œå› æ­¤äººç±»æ˜¯ ä¸‰è‰²è§† çš„ã€‚ä¸‰è‰²è§†è§£é‡Šäº†ä¸ºä»€ä¹ˆä¸åŒçš„é¢œè‰²åˆºæ¿€ä¼šè¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„é¢œè‰²ï¼Œè¿™ç§ç»“æœç§°ä¸º åŒè‰²å¼‚è°±ã€‚åŒè‰²å¼‚è°±å¯åˆ†ä¸º å…‰ç…§åŒè‰²å¼‚è°± å’Œ è§‚å¯Ÿè€…åŒè‰²å¼‚è°±ã€‚å…‰ç…§åŒè‰²å¼‚è°±æ˜¯å½“å…‰ç…§æ”¹å˜çš„æ—¶å€™ç›¸åŒçš„é¢œè‰²è¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ï¼Œè§‚å¯Ÿè€…åŒè‰²å¼‚è°±æ˜¯ç›¸åŒçš„é¢œè‰²åˆºæ¿€è¢«ä¸åŒçš„è§‚å¯Ÿè€…è®¤ä¸ºæ˜¯ä¸åŒçš„é¢œè‰²ã€‚

â€œæ‰¯äº†åŠå¤©å°±æƒ³ç»™æˆ‘ä¸Šä¸€èŠ‚ç”Ÿç‰©è¯¾ï¼Ÿâ€

â€œæ˜¯ï¼ä½ èƒ½æŠŠæˆ‘æ€æ ·ï¼Ÿâ€

å¹´è½»äººåˆ«æ€¥å˜›ï¼Œå’±ä»¬æ¥ç€è¯´~è§†æ†ç»†èƒå’Œè§†é”¥ç»†èƒç›¸äº’è¿æ¥å½¢æˆäº†æ„ŸçŸ¥åŒºåŸŸã€‚æ„ŸçŸ¥åŒºåŸŸåˆ†ä¸ºä¸‰ç§ï¼šé»‘-ç™½ã€çº¢-ç»¿å’Œé»„-è“ï¼Œè¿™ä¸‰ç§æ„ŸçŸ¥åŒºåŸŸç§°ä¸º **å¯¹ç«‹é€šé“**ã€‚é»‘-ç™½é€šé“æ˜¯è§†ç½‘è†œä¸Šå…·æœ‰æœ€é«˜ç©ºé—´åˆ†è¾¨ç‡ä¿¡å·çš„æ„ŸçŸ¥é€šé“ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆäººçœ¼å¯¹äºå›¾åƒäº®åº¦çš„å˜åŒ–æ¯”é¢œè‰²å˜åŒ–æ›´åŠ æ•æ„Ÿçš„åŸå› ã€‚

ä¸Šè¿°ç‰¹æ€§ä¾¿å¯åº”ç”¨äºå›¾åƒå‹ç¼©ï¼Œå› ä¸ºé¢œè‰²ä¿¡æ¯ç›¸æ¯”äºå…‰ç…§ä¿¡æ¯å‹ç¼©ç¨‹åº¦æ›´é«˜ã€‚ ç”Ÿç‰©è¯¾æ²¡ç™½è®²å§ï¼Œè¿˜æ˜¯æœ‰ç‚¹ç”¨çš„!

### é¢œè‰²ç©ºé—´

ç”±äºé¢œè‰²å—åˆ°ä¸»/å®¢è§‚å› ç´ çš„å½±å“ï¼Œæ‰€ä»¥å¾ˆéš¾å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„è¡¨ç¤ºæ–¹æ³•ã€‚å¦‚æœå°†é¢œè‰²ä»…çœ‹æˆæ˜¯äººçœ¼ç³»ç»Ÿä¸‰è‰²è§†ç‰¹æ€§çš„ç»“æœï¼Œé‚£ä¹ˆæœ€è‡ªç„¶çš„é¢œè‰²æè¿°æ–¹å¼æ˜¯å°†å…¶å®šä¹‰ä¸º ä¸‰åŸè‰² çš„ç»„åˆã€‚ä¸‰åŸè‰²é€šå¸¸æœ‰ä¸¤ç§ç»„åˆæ–¹å¼ï¼š*åŠ è‰²æ³•* å’Œ *å‡è‰²æ³•*ã€‚

åŠ è‰²é¢œè‰²æ¨¡å‹é€šè¿‡ä¸‰ä¸ªå•è‰²çš„ä¸åŒç»“åˆæ–¹å¼äº§ç”Ÿåˆºæ¿€ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸‰æ¡¶æ²¹æ¼†é¢œè‰²åˆ†ä¸ºçº¢ã€ç»¿ã€è“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´ä¸åŒé¢œè‰²æ²¹æ¼†çš„æ¯”ä¾‹ï¼Œä»è€Œæ··åˆå¾—åˆ°æ‰€æœ‰çš„é¢œè‰²ã€‚

å‡è‰²é¢œè‰²æ¨¡å‹é€šè¿‡å‡å°åå°„å™¨ä¸Šå…¥å°„å…‰çš„æ³¢é•¿çš„æ–¹å¼äº§ç”Ÿåˆºæ¿€ã€‚æœ€è‘—åçš„åº”ç”¨å®ä¾‹æ˜¯é’è‰²ã€å“çº¢ã€é»„è‰²å’Œä¸»ï¼ˆé»‘ï¼‰è‰²çš„æ‰“å°æ¨¡å¼ã€‚å‡è®¾ï¼Œåœ¨ç™½è‰²å…‰çº¿ä¸‹åœ¨ç™½çº¸ä¸Šè¿›è¡Œæ‰“å°ã€‚å¦‚æœä¸åœ¨ä¹‹ä¸Šå–·æ¶‚ä»»ä½•å¢¨æ°´ï¼Œé‚£ä¹ˆçº¸å¼ çœ‹ä¸Šå»å°±æ˜¯ç™½è‰²ï¼Œå¦‚æœåœ¨ä¹‹ä¸Šå–·æ¶‚é’è‰²å¢¨æ°´ï¼Œçº¸çœ‹ä¸Šå»å°±æ˜¯é’è‰²ï¼Œå› ä¸ºå¢¨æ°´å¸æ”¶äº†çº¢è‰²æ³¢ã€‚åŠ å…¥å†åŠ å…¥é»„è‰²ï¼Œè“è‰²æ³¢ä¹Ÿå°†è¢«å¸æ”¶ï¼Œçº¸çœ‹ä¸Šå»å°±æ˜¯ç»¿è‰²ã€‚æœ€åï¼Œå¦‚æœå†å°†å“çº¢åŠ å…¥ï¼Œå°†å®ç°å¢¨æ°´çš„ç»“åˆï¼Œå¢¨æ°´å°†å¸æ”¶æ‰€æœ‰çš„æ³¢é•¿ï¼Œçº¸çœ‹ä¸Šå»å°±æ˜¯é»‘è‰²ã€‚

åŸºäºä»¥ä¸ŠåŸç†ï¼Œé€šè¿‡å¯¹çº¸ä¸Šæ¯ä¸€ç§ä¸»å¢¨æ°´æˆ–é¢œè‰²çš„æ•°é‡è¿›è¡Œå»ºæ¨¡ï¼Œå°±å¯ä»¥è¡¨ç¤ºè‰²è°±ä¸Šçš„ä»»æ„é¢œè‰²ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦é»‘è‰²å¢¨æ°´å‘¢ï¼Ÿå› ä¸ºå¢¨æ°´æˆ–è€…çº¸å¼ éƒ½ä¸æ˜¯ç†æƒ³çš„ï¼Œåœ¨å®é™…æƒ…å†µä¸‹ï¼Œå¾ˆéš¾å¾—åˆ°é»‘è‰²ï¼Œè€Œæˆ‘ä»¬å¾—åˆ°çš„åªæ˜¯ä¸€ä¸ªå¾ˆæ·±çš„é¢œè‰²ç½¢äº†ã€‚é€šå¸¸ï¼Œç‰¹å®šé‡çš„é»‘è‰²ç”¨æ¥å¸æ”¶æ‰€æœ‰çš„å…‰æ³¢ï¼Œè¿™ä¸€å®šé‡æ˜¯é¢œè‰²çš„ä¸‰åŸè‰²éƒ¨åˆ†çš„æœ€å°å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°é¢œè‰² *(c, m, y)*ï¼Œæ‰“å°æœºå°†è¿›è¡Œå¦‚ä¸‹é¢œè‰²ç»„åˆï¼š

![cmy](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/cmy.png)

### CIE XYZ

*CIE XYZ* æ˜¯äº1931å¹´ç”±CIEå›½é™…å§”å‘˜ä¼šå®šä¹‰çš„æ ‡å‡†æ˜¯æœ€é‡è¦çš„é¢œè‰²ç³»ç»Ÿä¹‹ä¸€ã€‚è¿™ä¸ªé¢œè‰²æ ‡å‡†æ˜¯åŸºäºä»¥ä¸‹å®éªŒï¼šå®šä¹‰ä¸€ç»„ç‰¹å®šçš„è§†è§‰æ¡ä»¶åï¼Œå®éªŒå¯¹è±¡è¢«è¦æ±‚é€šè¿‡è°ƒèŠ‚ç‰¹å®šçš„å‚æ•°æ¥åŒ¹é…ä¸¤ä¸ªä¸åŒçš„é¢œè‰²ã€‚é€šè¿‡æ”¶é›†å®éªŒå¯¹è±¡å¯¹è‹¥å¹²å•è‰²å¯è§å…‰æ³¢çš„ååº”æ¥å®šä¹‰äººç±»è§‚å¯Ÿè€…çš„å¹³å‡ååº”ã€‚è¿™äº›è§‚å¯Ÿè€…ç§°ä¸º é¢œè‰²åˆºæ¿€çš„æ ‡å‡†è§‚å¯Ÿè€…ã€‚æ ‡å‡†è§‚å¯Ÿè€…çš„ååº”é€šè¿‡ä¸€ç»„å‡½æ•°è¿›è¡Œç¼–ç ï¼Œè¿™äº›å‡½æ•°ç§°ä¸º é¢œè‰²åŒ¹é…å‡½æ•°ã€‚é¢œè‰²åŒ¹é…å‡½æ•°é€šå¸¸è¡¨ç¤ºä¸ºï¼š

![rgb](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/rgb.png)

é€šè¿‡å°†å…¶ä¸åŠŸç‡è°±åˆ†å¸ƒå‡½æ•° *I(Î»)* è¿›è¡Œç§¯åˆ†ï¼Œå¯ä»¥å°†é¢œè‰²å®šä¹‰ä¸ºï¼š

![rgb-function](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/rgb-function.png)

![cie-rgb](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/cie-rgb.png)

*(a): CIE 1931 RGB é¢œè‰²åŒ¹é…å‡½æ•°*

![cie-xyz](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/cie-xyz.png)

(b): CIE XYZ é¢œè‰²åŒ¹é…å‡½æ•°

å›¾ (b) å±•ç¤ºäº† *CIEXYZ* åŸè‰²ï¼š

![xyz](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/xyz.png)

è¿™äº›åŒ¹é…å‡½æ•°æ˜¯ CIERGB é¢œè‰²åŒ¹é…å‡½æ•°çš„è½¬æ¢ç‰ˆæœ¬ã€‚ç»è¿‡è½¬æ¢ï¼Œæ‰€æœ‰çš„åŒ¹é…å‡½æ•°å‡ä¸ºæ­£å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–è‰²å½©å†ç°è®¾å¤‡çš„è®¾è®¡ã€‚å°† CIERGB é¢œè‰²ç©ºé—´è½¬æ¢ä¸º CIEXYZ é¢œè‰²ç©ºé—´çš„å…¬å¼å¦‚ä¸‹ï¼š

![rgb-transform-to-xyz-matrix](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/rgb-transform-to-xyz-matrix.png)

X Y Zé¢œè‰²åæ ‡çš„æ ‡å‡†å½¢å¼å¯ä»¥ç”¨æ¥å®šä¹‰ è‰²åº¦åæ ‡ï¼š

![xyz-coordinate](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/xyz-coordinate.png)

è‰²åº¦åæ ‡æ— æ³•å®Œå…¨ç¡®å®šä¸€ä¸ªé¢œè‰²ï¼Œè¿™æ˜¯ç”±äºå…¶å’Œæ€»æ˜¯ä¸º1ã€‚å› æ­¤è‰²åº¦åæ ‡ä»…éœ€è¦åˆ©ç”¨ä¸¤ä¸ªåæ ‡ä»¥äºŒç»´çš„å½¢å¼å°±å¯ä»¥ç¡®å®šã€‚é€šå¸¸ï¼Œå°†ğ‘Œä¸ğ”å’Œğ”‚è¿›è¡Œç»„åˆæ¥å®Œæ•´å®šä¹‰ä¸‰è‰²ç©ºé—´ï¼Œå³ğ”ğ”‚ğ‘Œã€‚é¢œè‰²åæ ‡ğ”å’Œğ”‚é€šå¸¸ç”¨æ¥å¯è§†åŒ–è‰²åº¦å›¾ä¸Šçš„é¢œè‰²ï¼ˆå³ä¾¿æ˜¯ä¸“ä¸šæ‰“å°æœºä¹Ÿæ— æ³•å†ç°è‰²åº¦å›¾ä¸Šçš„æ‰€æœ‰é¢œè‰²ï¼‰ï¼š

![color-coordinate](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/color-coordinate.jpeg)

### HSLå’ŒHSV

å›¾å½¢å­¦åº”ç”¨ä¸­å¸¸ç”¨çš„ä¸¤ç§é¢œè‰²ç©ºé—´æ˜¯ HSL å’Œ HSVã€‚åœ¨ HSL ä¸­ï¼Œé¢œè‰²ç”± è‰²è°ƒï¼ˆHueï¼‰ã€é¥±å’Œåº¦ï¼ˆSaturationï¼‰å’Œ äº®åº¦ï¼ˆLightnessï¼‰æ¥æè¿°ï¼Œè€Œåœ¨ HSV é¢œè‰²ç³»ç»Ÿä¸­äº®åº¦è¢«æ›¿æ¢ä¸º å€¼ï¼ˆValueï¼‰ã€‚è‰²è°ƒè¡¨ç¤ºå¾…å®šä¹‰é¢œè‰²çš„åŸºæœ¬è‰²åº¦ï¼Œäº®åº¦ï¼ˆé¢œè‰²çš„ç‰©ç†ç‰¹å¾ï¼‰ä¸é¢œè‰²çš„å¼ºåº¦æˆæ­£æ¯”ï¼Œé¥±å’Œåº¦ä¸é¢œè‰²çš„çº¯åº¦æœ‰ä¸€å®šå…³è”ã€‚

å°±åƒ CIEXYZ ä¸ CIERGB é¢œè‰²ç©ºé—´çš„åæ ‡å¯ä»¥è¿›è¡Œè½¬æ¢ä¸€æ ·ï¼ŒRGB å’Œ HSL/HSV é¢œè‰²ç©ºé—´ä¹‹é—´ä¹Ÿå¯ä»¥è¿›è¡Œè½¬æ¢ã€‚ä¸‹é¢ç»™å‡ºå°† RGB é¢œè‰²ç©ºé—´è½¬æ¢ä¸º HSL æ¨¡å¼çš„æ–¹æ³•ï¼š

![rbg-transform-to-hsl](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/rbg-transform-to-hsl.png)

å…¶ä¸­ *M=maxR, G, B*ï¼Œ*m=minR, G, B*ï¼Œ*Î”=M-m*ã€‚æ–¹ç¨‹ä¸­çš„åº¦æºäºå…­è¾¹å½¢å®šä¹‰çš„è‰²è°ƒï¼ŒHSV çš„è½¬æ¢æ–¹å¼ä¸ HLS çš„ç±»ä¼¼ï¼Œè‰²è°ƒçš„è®¡ç®—æ–¹æ³•ç›¸åŒï¼Œè€Œé¥±å’Œåº¦å’Œäº®åº¦çš„å®šä¹‰ç•¥æœ‰ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹ï¼š

![s-formula](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/s-formula.png)

![hsv-and-hsl](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/hsv-and-hsl.png)

*HSLå’ŒHSVé¢œè‰²ç©ºé—´*

### å›¾åƒè¡¨ç¤º

*å‘é‡å›¾* å’Œ *å…‰æ …å›¾* æ˜¯äºŒç»´å›¾åƒçš„ä¸¤ç§åŸºæœ¬å®šä¹‰æ–¹æ³•ã€‚å‘é‡å›¾æ˜¯ä¸€ç§å°†å›¾åƒè¡¨ç¤ºä¸ºä¸€ç»„åŸºæœ¬ç»˜åˆ¶å›¾å…ƒçš„æ–¹æ³•ï¼Œé€šè¿‡ç»„åˆç‚¹ã€ç›´çº¿ã€æ›²çº¿ã€çŸ©å½¢ã€æ˜Ÿå½¢ä»¥åŠå…¶ä»–å½¢çŠ¶è€Œå®šä¹‰çš„å›¾åƒï¼›è€Œå…‰æ …å›¾åƒåˆ™æ˜¯ç”±è§„åˆ™æ”¾ç½®çš„å°é¢œè‰²å—æ„æˆçš„çŸ©å½¢æ’åˆ—ã€‚

è¿™äº›å°çš„é¢œè‰²å—ç§°ä½œ åƒç´ ï¼Œåƒç´ å¤§å°æ˜¯æ²¿ç€å›¾åƒå®½å’Œé«˜æ–¹å‘çš„åƒç´ æ•°é‡ï¼Œæ¯”å¦‚ä¸‹å›¾çš„åƒç´ æ•°å¤§å°ä¸º20 x 20ã€‚å›¾åƒçš„åƒç´ æ•°å¤§å°é€šå¸¸ç”¨æ¥ä»£æ›¿ åƒç´ åˆ†è¾¨ç‡ï¼Œç®€ç§° åˆ†è¾¨ç‡ã€‚ä½†æ˜¯äºŒè€…æœ‰ç€éå¸¸é‡è¦çš„åŒºåˆ«ï¼šåˆ†è¾¨ç‡è¡¨ç¤ºä¸€ä¸ªå›¾åƒçš„ç»†èŠ‚å¯ä»¥æè¿°åˆ°å¤šå°çš„ç¨‹åº¦ï¼Œé€šå¸¸é‡åŒ–ä¸ºå›¾åƒä¸Šçš„ä¸¤æ¡ç›´çº¿åœ¨ä¸è¢«æ˜¾ç¤ºä¸ºä¸€æ¡ç›´çº¿æ—¶èƒ½å¤Ÿé å¤šè¿‘ï¼Œåˆ†è¾¨ç‡çš„æµ‹é‡å•ä½æ˜¯æ¯è‹±å¯¸åƒç´ æ•°ï¼Œå³ä¸€è‹±å¯¸ä¸Šå…·æœ‰çš„åƒç´ æ•°ã€‚

![pixel-mario](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/pixel-mario.png)

æ ¹æ®å›¾åƒçš„æ€§è´¨ï¼Œå¯ä»¥å°†åƒç´ å®šä¹‰ä¸º æ ‡é‡ æˆ– å‘é‡ã€‚æ¯”å¦‚ï¼Œç°åº¦å›¾åƒ çš„æ¯ä¸€ä¸ªåƒç´ æ˜¯ä¸€ä¸ªæ ‡é‡å€¼ï¼Œä»£è¡¨å›¾åƒåœ¨è¿™ä¸€ä½ç½®çš„äº®åº¦ï¼›åœ¨å½©è‰²å›¾åƒä¸­ï¼Œæ¯ä¸ªåƒç´ ç”±åŒ…å«è‹¥å¹²ä¸ªæ ‡é‡åˆ†é‡çš„å‘é‡æ¥è¡¨æ˜å›¾åƒçš„ç›¸åº”ä½ç½®çš„é¢œè‰²ã€‚

åˆ†è¾¨ç‡å¯¹äºåŒºåˆ†å…‰æ …å›¾å’Œå‘é‡å›¾å…·æœ‰é‡è¦çš„ä½œç”¨ã€‚å‘é‡å›¾å¯ä»¥è®¤ä¸ºæ˜¯å…·æœ‰æ— é™åˆ†è¾¨ç‡çš„å›¾åƒï¼Œå®é™…ä¸Šï¼Œå‘é‡å›¾å¯ä»¥ç®€å•åœ°é€šè¿‡æ–½åŠ ç¼©æ”¾å› å­è¢«æ”¾å¤§ï¼Œè€Œä¸ä¼šæŸå¤±å…¶æ‰€æè¿°å›¾åƒçš„è´¨é‡ã€‚ç›¸åï¼Œå…‰æ …å›¾åƒçš„è´¨é‡ä¸¥é‡ä¾èµ–äºåˆ†è¾¨ç‡ï¼Œåˆ©ç”¨å…‰æ …å›¾ç»˜åˆ¶å¹³æ»‘çš„æ›²çº¿éœ€è¦è¾ƒé«˜çš„åˆ†è¾¨ç‡ã€‚å¦‚æœåˆ†è¾¨ç‡è¾ƒä½ï¼Œåƒç´ å°†å˜å¾—å¯è§ï¼Œè¿™ç§è§†è§‰æ•ˆæœç§°ä¸º åƒç´ åŒ–ã€‚

å‘é‡åœ¨æè¿°è‡ªç„¶åœºæ™¯ç­‰å¤æ‚å›¾åƒæ—¶å…·æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œåœ¨è¿™ç§æˆ–ç›¸ä¼¼æƒ…å†µä¸‹ï¼Œä¸ºäº†ç¡®ä¿è¡¨ç°æ•ˆæœï¼Œå‘é‡å›¾éœ€è¦å¤§é‡éå¸¸å°çš„ç»˜åˆ¶ç²’åº¦ï¼Œè€Œå…‰æ …å›¾æ›´é€‚åˆè¡¨ç¤ºè¿™ç§å›¾åƒã€‚æ‰€ä»¥ï¼Œå‘é‡å›¾å¸¸ç”¨æ¥è®¾è®¡æ ‡å¿—ã€å•†æ ‡ã€ä¸ªæ€§åŒ–ç»˜å›¾ã€å›¾æ ‡ä»¥åŠå…¶ä»–ç±»ä¼¼å›¾åƒï¼Œè€Œä¸é€‚ç”¨äºè¡¨ç¤ºè‡ªç„¶æ™¯è§‚å›¾åƒæˆ–è€…éœ€è¦ä¸°å¯Œè§†è§‰å†…å®¹çš„å›¾åƒã€‚

## ğŸ§®å…‰æ …å›¾åƒç”Ÿæˆç®—æ³•

ä¹¦ä¸­ç¬¬ä¸€ç« ä»‹ç»äº†ä¸¤ç§å›¾åƒçš„ç»˜åˆ¶æ¨¡å¼ï¼š*å…‰çº¿è·Ÿè¸ª* å’Œ *å…‰æ …åŒ–æµæ°´çº¿*ï¼Œä¸‹é¢å°†ä¼šç®€å•çš„ä»‹ç»ä¸€ä¸‹ã€‚

### å…‰çº¿è·Ÿè¸ª

äººç±»èƒ½å¤Ÿçœ‹åˆ°äº‹ç‰©æ˜¯å› ä¸ºå…‰æºå‘å°„çš„å…‰å­ï¼Œå…‰å­æ˜¯å…‰åœ¨ç©ºé—´ä¸­ä¼ æ’­çš„åŸºæœ¬ç²’å­ã€‚å…‰å­åœ¨ä¼ æ’­è¿‡ç¨‹ä¸­æ’å‡»åˆ°ç‰©ä½“è¡¨é¢è€Œæ”¹å˜æ–¹å‘ï¼Œæœ€ç»ˆæœ‰ä¸€éƒ¨åˆ†åˆ°è¾¾äººçœ¼ã€‚

å‡å¦‚å¸Œæœ›æ¨¡æ‹Ÿå…‰å­çš„ä¼ æ’­è¿‡ç¨‹ï¼Œå¹¶ä¸”è®¡ç®—å…‰å’Œç‰©ä½“çš„äº¤äº’ä»¥è·Ÿè¸ªæ¯ä¸€ä¸ªå…‰å­åˆ°è¾¾çœ¼ç›çš„è·¯å¾„ã€‚å¾ˆæ˜¾ç„¶ï¼Œå¤šæ•°å…‰å­æ²¡æœ‰åˆ°è¾¾äººçœ¼ï¼Œè€Œ å…‰çº¿è·Ÿè¸ª èƒŒåçš„æ€æƒ³æ­£æ˜¯ä¸Šè¿°è¿‡ç¨‹çš„åè¿‡ç¨‹ï¼šä»çœ¼ç›è§¦å‘è·Ÿè¸ªå…‰çº¿åˆ°åœºæ™¯ä¸­ï¼Œè®¡ç®—å…‰çº¿ä¸ç‰©ä½“çš„äº¤äº’è¿‡ç¨‹ï¼Œè§‚å¯Ÿæœ€ç»ˆåˆ°è¾¾å…‰æºçš„å…‰çº¿ã€‚

![light-track](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/light-track.jpeg)

å…‰çº¿è·Ÿè¸ªçš„åŸºæœ¬å½¢å¼å¯ä»¥æè¿°ä¸ºä»¥ä¸‹ç®—æ³•ï¼š

```bash
å¯¹äºå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ :
 1. ç”±è§†ç‚¹ç©¿è¿‡åƒç´ æ„é€ å…‰çº¿
  2. å¯¹äºåœºæ™¯ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡
   2.1 å¯»æ‰¾å…¶ä¸å…‰çº¿çš„äº¤ç‚¹
 3. é€‰å–æœ€è¿‘çš„äº¤ç‚¹
  4. è®¡ç®—æœ€è¿‘çš„äº¤ç‚¹å¤„çš„é¢œè‰²
```

åœ¨ä»¥ä¸Šç®—æ³•ä¸­çœç•¥ æ­¥éª¤4 å°†å¾—åˆ°åœºæ™¯ä¸­å¯¹è±¡çš„å¯è§†å›¾ï¼Œå¯è§†å›¾æ˜¯ä¸€å¼ å›¾åƒï¼Œå…¶ä¸­æ¯ä¸€ä¸ªåƒç´ éƒ½æ˜¯ä¸‰ç»´åœºæ™¯çš„ä¸€ä¸ªå¯è§éƒ¨åˆ†ã€‚æ­¤æ—¶ï¼Œç®—æ³•ç§°ä¸º å…‰çº¿æŠ•å°„ã€‚æ›´å®Œå–„ç‰ˆæœ¬å¸¸è¢«ç§°ä¸º ç»å…¸å…‰çº¿è·Ÿè¸ªç®—æ³•ï¼š

```bash
å¯¹äºå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ :
 1. ç”±è§†ç‚¹ç©¿è¿‡åƒç´ æ„é€ å…‰çº¿
  2. é‡å¤ç›´è‡³æ»¡è¶³ç»ˆæ­¢æ¡ä»¶
   2.1 å¯¹äºåœºæ™¯ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡
     2.1.1 å¯»æ‰¾å¯¹è±¡ä¸å…‰çº¿çš„äº¤ç‚¹
    2.2 é€‰å–æœ€è¿‘çš„äº¤ç‚¹
    2.3 è®¡ç®—å…‰çº¿è·Ÿè¸ªç®—æ³•
  3. åŸºäºå…‰çº¿è·¯å¾„è®¡ç®—é¢œè‰²
```

åŸºäºä»¥ä¸Šç®—æ³•ï¼Œå¦‚æœæ²¡æœ‰æ—¶é—´é™åˆ¶ï¼Œå½“å…‰çº¿åˆ°è¾¾å…‰æºæˆ–è€…å°„å‡ºåœºæ™¯ç»ˆæ­¢å°†ååˆ†ç®€å•ã€‚ä½†æ˜¯ï¼Œç®—æ³•ä¸å¯èƒ½æ— é™æ¬¡æ‰§è¡Œï¼Œå› æ­¤éœ€è¦å¢åŠ ç»ˆæ­¢æ¡ä»¶ä»¥åˆ¤å®šå…‰çº¿å·²è¿½è¸ªåˆ°å…‰æºï¼ŒåŒ…æ‹¬é™åˆ¶ è¿­ä»£æ¬¡æ•°ï¼ˆå³å…‰çº¿åœ¨è¡¨é¢åå°„æ¬¡æ•°ï¼‰ã€å…‰çº¿ç©¿è¶Šçš„è·ç¦» æˆ–è€… é™ä½è¿½è¸ªå…‰çº¿éœ€è¦çš„æ—¶é—´ã€‚

å…‰çº¿è·Ÿè¸ªç®—æ³•çš„å¼€é”€å¯ä»¥è¿›è¡Œå¦‚ä¸‹è¯„ä¼°ï¼šå¯¹äºä¸€æŸå…‰çº¿ï¼Œè¿›è¡Œå…¶ä¸æ‰€æœ‰mä¸ªç‰©ä½“çš„ç›¸äº¤æµ‹è¯•ï¼Œå¯¹äºğ‘›áµ£æ¡å…‰çº¿çš„ä»»æ„ä¸€æ¡ï¼Œæœ€å¤šè¿›è¡Œğ‘˜æ¬¡åå°„ï¼ˆğ‘˜æ˜¯å…è®¸çš„æœ€å¤§åå°„æ¬¡æ•°ï¼‰ã€‚é€šå¸¸ï¼Œå¦‚æœå±å¹•åƒç´ æ€»æ•°ä¸ºğ‘›â‚šï¼Œåˆ™åº”æ»¡è¶³ğ‘›áµ£>ğ‘›â‚šï¼Œå› ä¸ºéœ€è¦æ¯ä¸ªåƒç´ è‡³å°‘æœ‰ä¸€æŸå…‰çº¿ã€‚å› æ­¤å…‰çº¿è·Ÿè¸ªç®—æ³•çš„å¼€é”€ä¸ºï¼š

![light-track-cost](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/light-track-cost.png)

å…¶ä¸­ï¼Œ*Int(oáµ¢)* æ˜¯ä¸€æ¡å…‰çº¿ä¸ç‰©ä½“ *oáµ¢* ç›¸äº¤æµ‹è¯•çš„å¼€é”€ã€‚ç„¶è€Œï¼Œé€šè¿‡é‡‡ç”¨åŠ é€Ÿæ•°æ®ç»“æ„å¯ä»¥æŠŠç›¸äº¤æµ‹è¯•å¼€é”€å‡å°‘è‡³ *O(log(m))*ã€‚

### å…‰æ …åŒ–æµæ°´çº¿

å…‰æ …åŒ–ç»˜åˆ¶æµæ°´çº¿ æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„äº¤äº’æ€§å›¾åƒç»˜åˆ¶æ–¹æ³•ã€‚

![pixel-processing](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/pixel-processing.jpeg)

åœ¨ä¹‹å‰çš„WebGLåŸºç¡€ç³»åˆ—æ–‡ç« ä¸­ä¹Ÿä»‹ç»è¿‡ï¼Œåœ¨æ­¤å°±ä¸èµ˜è¿°ã€‚

å…‰æ …åŒ–æµæ°´çº¿çš„æ‰§è¡Œå¼€é”€åŒ…æ‹¬æ‰€æœ‰é¡¶ç‚¹ğ‘›áµ¥çš„å¤„ç†ï¼ˆå³å˜æ¢ï¼‰ï¼Œä»¥åŠæ‰€æœ‰å‡ ä½•å›¾å…ƒçš„å…‰æ …åŒ–æ“ä½œï¼š

![rasterization-cost](https://raw.githubusercontent.com/LiJiahaoCoder/lijiahao.github.io/master/src/assets/articles/webgl/webgl-color-and-image/rasterization-cost.png)

å…¶ä¸­ï¼Œğ¾â‚œğ‘Ÿæ˜¯è½¬æ¢ä¸€ä¸ªé¡¶ç‚¹çš„å¼€é”€ï¼Œè€Œğ‘…ğ‘ğ’”(ğ‘áµ¢)æ˜¯å…‰æ …åŒ–ä¸€ä¸ªå›¾å…ƒçš„å¼€é”€ã€‚

## ğŸ¬ç»“æŸè¯­

â€æˆ‘^&%^%$@),[â€ï¼ˆè„è¯è¿ç¯‡ï¼‰ï¼Œåˆšçœ‹å®Œç¬¬ä¸€ç« æ¦‚è¿°å°±è¦è¢«åŠé€€äº†ğŸ˜¶â€ğŸŒ«ï¸

â€å¤©å°†é™å¤§ä»»äºæ–¯äººä¹Ÿï¼Œå¿…å…ˆè‹¦å…¶å¿ƒå¿—ï¼ŒåŠ³å…¶ç­‹éª¨... ...â€œï¼Œèœå°±ä¸è¦ç»™è‡ªå·±æ‰¾ç†ç”±äº†ï¼ŒåŠªåŠ›å……å®è‡ªå·±ï¼Œæ‰èƒ½â€æ‹…å¤§ä»»â€œã€‚æ¥ä¸‹æ¥ä¼šç»§ç»­ã€Šè®¡ç®—æœºå›¾å½¢å­¦å¯¼è®ºã€‹ä¸€ä¹¦çš„å­¦ä¹ ï¼Œå¹¶ä¸”è¿˜ä¼šç»§ç»­æ€»ç»“å­¦ä¹ å†…å®¹åˆ†äº«ç»™å¤§å®¶ï¼å†²ï¼å†²ï¼å†²ï¼ğŸ›

å‘è¡¨äº2020-06-19
